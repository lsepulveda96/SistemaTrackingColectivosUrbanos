<mat-card class="card-login">
   
    <mat-card-content class="mat-elevation-z12">
        
        <div class="row">
            <span class="d-flex justify-content-center" style="font-weight: bold;">Inicio sesion</span>
        </div>
        <!-- <mat-divider></mat-divider> -->
        <div class="border-top my-3"></div>

        <div class="alert alert-primary" *ngIf="waiting && !isLoggedIn">
            <i class="bi bi-info-circle"></i>
            Validando usuario...
        </div>

        <div class="alert alert-danger" role="alert" *ngIf="isLoginFailed">
            <i class="bi bi-x-octagon"></i>
            Login fallo: {{ errorMessage }}
        </div>

        <div class="alert alert-success" *ngIf="isLoggedIn">
            <i class="bi bi-check-circle"></i>
            Login exitoso. Redireccionando a pagina principal...
        </div>

        <div class="row mt-4">
            <div class="col-12">
                <mat-form-field appearance="outline" floatLabel="always">
                    <mat-label>Usuario</mat-label>
                    <input matInput [formControl]="usernameIC" required  (keyup)="onKeyup()"/>
                    <mat-error *ngIf="usernameIC.hasError('required')">usuario requerido</mat-error>
                </mat-form-field>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <mat-form-field appearance="outline" floatLabel="always">
                    <mat-label>Contraseña</mat-label>
                    <input matInput [formControl]="passwIC" type="password" (keyup)="onKeyup()" (keyup.enter)="onKeyEnterPasswd()" required />
                    <mat-error *ngIf="passwIC.hasError('required')">contraseña requerido</mat-error>
                </mat-form-field>
            </div>
        </div>

        <div class="loading-indicator" *ngIf="waiting">
            <mat-spinner mode="indeterminate" diameter="50"></mat-spinner>
        </div>

        <div class="row mt-4">
            <div class="col-12">
                <div class="d-grid gap-2">
                    <button mat-raised-button color="primary" (click)="onSubmit()" [disabled]="usernameIC.hasError('required') 
                                    || passwIC.hasError('required')
                                    || passwIC.hasError('minlength')
                                    || waiting">
                        Ingresar
                    </button>
                </div>
            </div>
        </div>

    </mat-card-content>
</mat-card>