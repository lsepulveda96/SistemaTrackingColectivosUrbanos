<mat-card>
    <mat-card-header>
        <mat-card-title>
            <div layout-align="bottom left">
                <mat-icon>supervisor_account</mat-icon>
                &nbsp; {{ id ? 'Editar usuario ' + id : 'Registro nuevo usuario' }}
            </div>
        </mat-card-title>
    </mat-card-header>
    <mat-divider></mat-divider>
    <mat-card-content>
        <div class="container">
            <div class="loading-indicator" *ngIf="waiting">
                <mat-spinner mode="indeterminate" color="accent"></mat-spinner>
            </div>
            <div class="row">
                <div class="col-5">
                    <mat-card>
                        <mat-card-content class="pt-0">
                            <div class="row">
                                <div class="col-12">
                                    <mat-form-field appearance="standard" style="width: 100%;">
                                        <mat-label>Nombre de usuario</mat-label>
                                        <input matInput [formControl]="usuarioIC" autocomplete="off" required
                                            [readonly]="!!usuario" />
                                        <mat-error *ngIf="usuarioIC.hasError('required')">requerido</mat-error>
                                        <mat-error *ngIf="usuarioIC.hasError('minlength')">al menos 5
                                            caracteres</mat-error>
                                        <mat-error *ngIf="usuarioIC.hasError('pattern')">caracteres no
                                            permitidos</mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="row" *ngIf="!usuario">
                                <div class="col-12">
                                    <mat-form-field appearance="standard" style="width: 100%;">
                                        <mat-label>Contraseña</mat-label>
                                        <input matInput type="password" [formControl]="passwdIC" autocomplete="off"
                                            required />
                                        <mat-error *ngIf="passwdIC.hasError('required')">requerido</mat-error>
                                        <mat-error
                                            *ngIf="passwdIC.hasError('minlength') || passwdIC.hasError('maxlength')">entre
                                            8 y 15 caracteres</mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="row" *ngIf="!usuario">
                                <div class="col-12">
                                    <mat-form-field appearance="standard" style="width: 100%;">
                                        <mat-label>Repetir contraseña</mat-label>
                                        <input matInput type="password" [formControl]="passwd2IC" autocomplete="off"
                                            required />
                                        <mat-error *ngIf="passwd2IC.hasError('required')">requerido</mat-error>
                                        <mat-error
                                            *ngIf="passwd2IC.hasError('minlength') || passwd2IC.hasError('maxlength')">entre
                                            8 y 15 caracteres</mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <BR>
                            <div class="row">
                                <div class="col-6">
                                    <mat-checkbox [formControl]="superusrIC">Superusuario</mat-checkbox>
                                </div>
                            </div>
                            <BR>
                        </mat-card-content>
                    </mat-card>
                </div>
                <div class="col-7">
                    <mat-card>
                        <mat-card-content class="pt-0">
                            <div class="row">
                                <div class="col-6">
                                    <mat-form-field appearance="standard" style="width: 100%;">
                                        <mat-label>Nombre</mat-label>
                                        <input matInput [formControl]="nombreIC" autocomplete="off" required />
                                        <mat-error *ngIf="nombreIC.hasError('required')">requerido</mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-6">
                                    <mat-form-field appearance="standard" style="width: 100%;">
                                        <mat-label>apellido</mat-label>
                                        <input matInput [formControl]="apellidoIC" autocomplete="off" required />
                                        <mat-error *ngIf="apellidoIC.hasError('required')">requerido</mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <mat-form-field appearance="standard" style="width: 100%;">
                                        <mat-label>Email</mat-label>
                                        <input matInput [formControl]="emailIC" autocomplete="off" />
                                        <mat-error *ngIf="emailIC.hasError('email')">email incorrecto</mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <mat-form-field appearance="standard" style="width: 100%;">
                                        <mat-label>DNI</mat-label>
                                        <input matInput [formControl]="dniIC" autocomplete="off" />
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <mat-form-field appearance="standard" style="width: 100%;">
                                        <mat-label>Direccion</mat-label>
                                        <input matInput [formControl]="direccionIC" autocomplete="off" />
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <mat-form-field appearance="standard" style="width: 100%;">
                                        <mat-label>Telefono</mat-label>
                                        <input matInput [formControl]="telefonoIC" autocomplete="off" />
                                    </mat-form-field>
                                </div>
                            </div>
                        </mat-card-content>
                    </mat-card>
                </div>
            </div>

            <mat-divider></mat-divider>
            <br>
            <div class="d-flex justify-content-end">
                <button mat-stroked-button color="primary" (click)="registrarUsuario()" *ngIf="!id"
                    class="button-border" [disabled]="usuarioIC.invalid || passwdIC.invalid || passwd2IC.invalid 
                        || emailIC.invalid ||nombreIC.invalid || apellidoIC.invalid">
                    Guardar
                </button>
                <button mat-stroked-button color="primary" (click)="actualizarUsuario()" *ngIf="id"
                    class="button-border" [disabled]="emailIC.invalid || nombreIC.invalid || apellidoIC.invalid">
                    Actualizar
                </button>
                <button mat-stroked-button [routerLink]="id ? ['../..']:['../']" color="primary" class="button-border">
                    Cancelar
                </button>
            </div>
        </div>

    </mat-card-content>
</mat-card>